<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Froll.net — On-chain Social + Swap</title>
  <meta name="description" content="Post fully on-chain with FROLL and swap FROLL ↔ VIC directly on Froll.net. 100% decentralized." />
  <link rel="icon" href="froll_48.png" type="image/png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Top Nav -->
  <header class="nav">
    <div class="nav-left">
      <img src="128.png" alt="FROLL" class="logo" />
      <h1 class="brand">Froll.net</h1>
    </div>
    <div class="nav-center">
      <span id="froll-price-usd" class="price">Loading price...</span>
    </div>
    <div class="nav-right">
      <button id="swap-toggle" class="btn ghost" title="Swap FROLL/VIC">Swap FROLL/VIC</button>
      <button id="connect-btn" class="btn primary">Connect Wallet</button>
    </div>
  </header>

  <main class="container">

    <!-- Swap Panel (hidden by default) -->
    <section id="swap-panel" class="card hide" aria-hidden="true">
      <h2>Swap FROLL ↔ VIC</h2>
      <div class="swap-grid">
        <div class="swap-side">
          <label for="from-token">From</label>
          <select id="from-token">
            <option value="VIC">VIC</option>
            <option value="FROLL">FROLL</option>
          </select>
          <input id="from-amount" type="number" placeholder="0.0" min="0" step="any" />
        </div>

        <div class="swap-arrow" aria-hidden="true">↔</div>

        <div class="swap-side">
          <label for="to-token">To</label>
          <select id="to-token">
            <option value="FROLL">FROLL</option>
            <option value="VIC">VIC</option>
          </select>
          <input id="to-amount" type="number" placeholder="0.0" min="0" step="any" disabled />
        </div>
      </div>
      <p class="meta" id="swap-fees">Fee: 0.01 VIC • Rate: 1 FROLL = 100 VIC</p>
      <button id="swap-btn" class="btn accent">Swap Now</button>
    </section>

    <!-- Profile + Composer -->
    <section class="grid">
      <aside class="card">
        <h2>Your Profile</h2>
        <p id="wallet-short">Not connected</p>
        <p class="meta">Register fee: 0.001 FROLL</p>
        <button id="register-btn" class="btn secondary">Register</button>
        <hr style="border:none;border-top:1px solid #eee;margin:12px 0;">
        <div class="meta">
          <div>Contract: <code id="contract-address">0x28c642682b1E1458d922C4226a7192F5B8953A74</code></div>
          <div>Token: <code>FROLL</code> on VIC</div>
        </div>
      </aside>

      <section class="card flex-1">
        <h2>New Post</h2>
        <textarea id="post-content" rows="8" placeholder="Write on-chain (≤ 60KB). New lines will be preserved. You can paste any language. URLs like https://lottery.vin will be clickable."></textarea>
        <div class="row">
          <span id="byte-counter" class="meta">0 / 60000 bytes</span>
          <button id="post-btn" class="btn primary">Post On-chain</button>
        </div>
        <p class="meta" id="post-hint">Tip: Long posts cost more gas. Keep it concise when possible.</p>
      </section>
    </section>

    <!-- Feed -->
    <section class="card">
      <h2>Latest Posts</h2>
      <div id="feed"></div>
    </section>
  </main>

  <footer class="footer">
    <span>© Froll.net • 100% on-chain social • Built for VIC • <a href="https://froll.org" target="_blank" rel="noopener noreferrer">Froll.org</a></span>
  </footer>

  <!-- Scripts -->
  <script>
    // Expose contract constants for app.js
    window.FROLL_SOCIAL_ADDRESS = "0x28c642682b1E1458d922C4226a7192F5B8953A74";  // deployed
    window.FROLL_TOKEN_ADDRESS  = "0xB4d562A8f811CE7F134a1982992Bd153902290BC";  // FROLL on VIC
    window.SWAP_CONTRACT_ADDRESS = "0x9197BF0813e0727df4555E8cb43a0977F4a3A068"; // fixed-rate swap (1 FROLL = 100 VIC)
  </script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  <script src="app.js"></script>
</body>
</html>

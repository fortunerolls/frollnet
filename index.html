<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Froll.net – Decentralized Social Network</title>
  <link rel="icon" href="froll_48.png" type="image/png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="navbar-content">
      <img src="froll_48.png" alt="FROLL Logo" class="logo" />
      <span id="froll-price-usd" class="froll-price">Loading price...</span>

      <button id="connect-wallet" class="btn">Connect Wallet</button>
      <button id="toggle-swap" class="btn">Swap FROLL/VIC</button>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <div class="main-container">
    <!-- Social Feed -->
    <div id="social-feed">
      <h2>Decentralized Social Feed</h2>

      <!-- Composer -->
      <div id="create-post">
        <!-- Nút đăng ký: sẽ bị ẩn nếu user đã register (app.js lo phần ẩn/hiện) -->
        <button id="register-account" class="btn secondary">Register (0.001 FROLL)</button>

        <input type="text" id="post-title" placeholder="Post title..." />
        <textarea id="post-content" placeholder="Write your post... (keeps new lines, up to ~60KB)"></textarea>
        <input type="text" id="post-media" placeholder="Image or video URL (optional)" />
        <button id="submit-post" class="btn">Post</button>

        <div id="compose-hint" class="meta">You can read posts without a wallet. Connect only when you want to publish.</div>
      </div>

      <!-- Feed list -->
      <div id="posts-container"></div>
    </div>

    <!-- Swap Interface (toggle panel) -->
    <div id="swap-interface" style="display:none;">
      <h2>Swap FROLL/VIC</h2>
      <div>
        <label>From:</label>
        <input type="number" id="swap-from-amount" placeholder="0.0" />
        <select id="swap-from-token">
          <option value="VIC">VIC</option>
          <option value="FROLL">FROLL</option>
        </select>
      </div>
      <div>
        <label>To:</label>
        <input type="number" id="swap-to-amount" placeholder="0.0" readonly />
        <select id="swap-to-token" disabled>
          <option value="FROLL">FROLL</option>
          <option value="VIC">VIC</option>
        </select>
      </div>
      <button id="swap-now" class="btn" disabled>Swap Now</button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <p>Part of the FROLL ecosystem:</p>
    <a href="https://lottery.vin" target="_blank">Lottery.vin</a> |
    <a href="https://froll.org" target="_blank">Froll.org</a> |
    <a href="https://x.com/FortuneRolls" target="_blank">X</a> |
    <a href="https://t.me/FortuneRolls" target="_blank">Telegram</a>
  </footer>

  <!-- SCRIPT: quick price -->
  <script>
    async function loadFrollPrice() {
      try {
        const res = await fetch("https://api.binance.com/api/v3/ticker/price?symbol=VICUSDT");
        const data = await res.json();
        const vicPrice = parseFloat(data.price || "0");
        const frollPrice = vicPrice * 100; // internal calc; UI không ghi tỉ lệ cố định
        document.getElementById("froll-price-usd").textContent = frollPrice ? `1 FROLL ≈ ${frollPrice.toFixed(2)} USD` : "Price unavailable";
      } catch {
        document.getElementById("froll-price-usd").textContent = "Price unavailable";
      }
    }
    loadFrollPrice();
  </script>

  <!-- Main App Logic -->
  <script src="app.js"></script>
</body>
</html>
